# i18n Design — 3 Languages (VI / EN / ZH)

## Goal

Add multi-language support to the entire frontend. Users switch language via the globe icon in the header — the switch is instant (no page reload). Language preference persists across sessions via localStorage.

## Languages

| Code | Label       | Default |
|------|-------------|---------|
| `vi` | Tiếng Việt  | Yes     |
| `en` | English     | No      |
| `zh` | 中文         | No      |

## Architecture

### 1. Locale Files — `FRONEND/app/locales/{vi,en,zh}.js`

Each file exports a flat key-value object. All 3 are imported at build time (no async fetch) so switching is instant.

```js
// locales/vi.js
export default {
  'menu.home': 'Trang chủ',
  'menu.members': 'Danh sách hội viên',
  'col.username': 'Hội viên',
  'btn.search': 'Tìm kiếm',
  // ~300 keys total
}
```

Key naming convention: `{section}.{identifier}`
- `menu.*` — sidebar menu labels
- `col.*` — data table column titles
- `search.*` — search form labels and options
- `btn.*` — button text
- `msg.*` — user-facing messages
- `sync.*` — sync panel strings
- `auth.*` — login/register form
- `page.*` — page titles and misc UI

### 2. i18n Engine — `FRONEND/app/i18n/index.js`

```
t(key) → string        // Lookup translation, fallback to key
setLang(code)           // Switch language, save to localStorage, call re-render
getLang() → string      // Get current language code
onLangChange(callback)  // Register callback for language changes
```

- Reads `localStorage.getItem('lang')` on init, defaults to `'vi'`
- `setLang()` triggers all registered callbacks (layout re-render, page re-render)

### 3. Integration Points

**Files to modify (replace hardcoded strings with `t()`):**

| File | ~Strings | Section |
|------|----------|---------|
| `constants/index.js` | 30 | ROUTE_TITLES, MSG |
| `layout/index.js` | 20 | MENU_ITEMS, header |
| `data-table/config.js` | 150+ | Column titles, search labels, options |
| `data-table/index.js` | 80+ | Sync panel, buttons, status messages |
| `data-table/options.js` | 70+ | LOTTERY_OPTIONS, PLATFORM_OPTIONS |
| `auth/index.js` | 14 | Login/register form |
| `dashboard/index.js` | 2 | Welcome text |
| `placeholder/index.js` | 1 | Placeholder text |
| `not-found/index.js` | 2 | 404 page |

**Layout changes:**
- Globe icon → dropdown with 3 language options
- On selection → `setLang()` → re-render sidebar + current page

### 4. Language Switch Flow

```
User clicks globe icon
  → Layui dropdown shows: Tiếng Việt / English / 中文
  → User picks "English"
  → setLang('en')
  → localStorage.set('lang', 'en')
  → Trigger onLangChange callbacks
    → Re-render sidebar menu (Vietnamese labels → English)
    → Re-render current page (column titles, buttons, forms → English)
    → Data table content stays as-is (from upstream, not translated)
```

### 5. Upstream Data

Data fetched from upstream (member names, status_format, type_format, game names) stays in whatever language the upstream returns. Only UI labels are translated.

### 6. Backend

Add `Accept-Language` header support for error messages. Minimal scope — most backend responses are data, not user-facing text.

## Constraints

- No external i18n library (keep lightweight)
- All translations loaded at build time (no async)
- ~300 translation keys, ~10KB per locale file
- Fallback: if key missing in current locale, show Vietnamese
